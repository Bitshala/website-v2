---
const summits = [
  {
    id: "winter-2025",
    label: "Winter 2025",
    images: [
      "public/boss/gallery/image1.png",
      "public/boss/gallery/image2.png",
      "public/boss/gallery/image3.png",
      "public/boss/gallery/image4.png",
      "public/boss/gallery/image5.png",
      "public/boss/gallery/image6.png",
      "public/boss/gallery/image7.png",
      "public/boss/gallery/image8.png",
    ],
    synopsisUrl: "/boss/winter-2025-synopsis",
  },
  {
    id: "summer-2025",
    label: "Summer 2025",
    images: [
      "public/boss/gallery/image1.png",
      "public/boss/gallery/image2.png",
      "public/boss/gallery/image3.png",
      "public/boss/gallery/image4.png",
      "public/boss/gallery/image7.png",
      "public/boss/gallery/image8.png",
    ],
    synopsisUrl: "/boss/summer-2025-synopsis",
  },
];
---

<section
  id="gallery"
  class="w-full bg-[#271A23] px-4 py-16 md:px-8 lg:px-24 xl:px-32"
>
  <div class="mx-auto max-w-[1400px]">
    <!-- Heading -->
    <h2 class="mb-12 font-boss text-6xl text-white">
      Glimpse and
      <span class="bg-[#D7FF00] px-2 text-black">highlight</span>
    </h2>

    <!-- Tabs -->
    <div class="mb-8 flex flex-wrap gap-4">
      {summits.map((summit, index) => (
        <button
          data-tab={summit.id}
          class={`tab-button rounded-lg px-6 py-3 font-boss text-2xl transition-colors ${
            index === 0
              ? "bg-[#D7FF00] text-black"
              : "bg-[#3D2434] text-white hover:bg-[#4D3444]"
          }`}
        >
          {summit.label}
        </button>
      ))}
    </div>

    <!-- Galleries -->
    {summits.map((summit, index) => {
      const baseImages = summit.images.slice(0, 6);
      const overlayImages = summit.images.slice(6);

      return (
        <div
          data-gallery={summit.id}
          class={`gallery-content mt-20 ${index === 0 ? "" : "hidden"}`}
        >
          <!-- DESKTOP -->
          <div class="relative hidden md:block">
            <!-- Base grid -->
            <div
              class="grid grid-cols-2 lg:grid-cols-3
                     gap-x-1 gap-y-4
                     [isolation:isolate]"
            >
              {baseImages.map((image) => (
                <img
                  src={image}
                  alt={`${summit.label} gallery`}
                  loading="lazy"
                  class="
                    w-full
                    -mt-10
                    relative
                    transition-all duration-300 ease-out
                    hover:scale-[1.08]
                    hover:-translate-y-6
                    hover:z-30
                  "
                />
              ))}
            </div>

            <!-- Overlay images (ALWAYS CENTERED) -->
              {overlayImages.map((image, i) => (
                <img
                  src={image}
                  alt={`${summit.label} overlay`}
                  loading="lazy"
                  class={`
                    absolute
                    left-1/2
                    w-[32%]
                    transition-all duration-300 ease-out
                    hover:scale-[1.1]
                    hover:-translate-y-6
                    hover:z-40
                    ${
                      i === 0
                        ? "top-[4rem] left-[6rem] rotate-[-6deg]"
                        : "top-[4rem] -translate-x-[-10%] rotate-[5deg]"
                    }
                  `}
                />
              ))}
          </div>

          <!-- MOBILE -->
          <div class="grid grid-cols-1 gap-4 md:hidden">
            {summit.images.map((image) => (
              <img
                src={image}
                loading="lazy"
                class="w-full transition-transform duration-300"
              />
            ))}
          </div>
        </div>
      );
    })}
  </div>
</section>

<script>
  const tabButtons = document.querySelectorAll(".tab-button");
  const galleryContents = document.querySelectorAll(".gallery-content");

  tabButtons.forEach((button) => {
    button.addEventListener("click", () => {
      const targetTab = button.getAttribute("data-tab");

      tabButtons.forEach((btn) => {
        if (btn.getAttribute("data-tab") === targetTab) {
          btn.classList.add("bg-[#D7FF00]", "text-black");
          btn.classList.remove("bg-[#3D2434]", "text-white");
        } else {
          btn.classList.add("bg-[#3D2434]", "text-white");
          btn.classList.remove("bg-[#D7FF00]", "text-black");
        }
      });

      galleryContents.forEach((content) => {
        content.classList.toggle(
          "hidden",
          content.getAttribute("data-gallery") !== targetTab
        );
      });
    });
  });
</script>

---
import Layout from "../../layouts/Layout.astro";
import Carousel from "../../components/common/Carousel";
import CohortStructure from "../../components/cohortPages/CohortStructure.astro";
import CohortDetails from "../../components/cohortPages/common/CohortDetails.astro";
import Syllabus from "../../components/cohortPages/Syllabus.astro";
import CohortHeader from "../../components/cohort/CohortHeader.astro";
import Application from "../../components/common/Application";
import About from "../../components/cohortPages/pb/About.astro";
import MeetYourTAs from "../../components/cohortPages/common/MeetYourTAs.astro";
import CohortGraduates from "../../components/cohortPages/CohortGraduates.astro";
import { getCohortStartDate, getCohortEndDate, getCohortRegistrationDeadline } from "../../lib/cohorts";

const headerProps = {
  removeHeader: true,
};
const role = "pb_cohort";
const cohortName = "Programming Bitcoin";
const isVisible = true;

const res = await fetch("https://api.bitshala.org/Cohorts/available");
const cohorts = await res.json();

const commencementDate = getCohortStartDate(cohorts, "pb");
const endDate = getCohortEndDate(cohorts, "pb");
const registrationDeadline = getCohortRegistrationDeadline(cohorts, "pb");
---

<Layout
  title="Programming Bitcoin"
  headerProps={headerProps}
  isVisible={isVisible}
>
  <CohortHeader img="/cohort/pb.webp" />
  <About />
  <div class="px-3 lg:px-8">
    <a
      href="#applicationForm"
      class="inline-block rounded-lg bg-black px-6 py-3 font-header font-bold text-white hover:bg-orange transition-colors lg:text-lg"
    >
      Apply Now
    </a>
  </div>

  <CohortDetails
    format={[
      {
        name: "Start date",
        desc: commencementDate,
      },
      {
        name: "End date",
        desc: endDate,
      },
      {
        name: "Registration deadline",
        desc: registrationDeadline,
      },
      {
        name: "Duration",
        desc: "08 weeks",
      },
      {
        name: "Cohort level",
        desc: "Advanced",
      },
      {
        name: "Mode",
        desc: "Self-study, weekly live sessions, group discussions, and QnA",
      },
      {
        name: "Format",
        desc: "Online virtual classroom",
      },
    ]}
  />
  <CohortStructure />

  <Syllabus
    syllabus={[
      {
        week: "Week 00",
        name: "Introductions",
        chNo: "",
      },
      {
        week: "Week 01",
        name: "Finite Fields and Elliptic Curves",
        chNo: "01-02",
      },
      {
        week: "Week 02",
        name: "Elliptic Curve Cryptography",
        chNo: "03",
        bg: "bg-white",
      },
      {
        week: "Week 03",
        name: "Serializations and Transactions",
        chNo: "04-05",
      },
      {
        week: "Week 04",
        name: "Scripts and Transaction Validation",
        chNo: "06-07",
      },
      {
        week: "Week 05",
        name: "P2SH and Blocks",
        chNo: "08-09",
      },
      {
        week: "Week 06",
        name: "Networking and SPV",
        chNo: "10-11",
      },
      {
        week: "Week 07",
        name: "Bloom filter Segwit",
        chNo: "12-13",
      },
      {
        week: "Week 08",
        name: "Conclusion and Next Step",
        chNo: "",
      },
    ]}
  />
  <MeetYourTAs />
  <div id="applicationForm">
    <Application
      client:only
      cohortName={cohortName}
      role={role}
      regOpen={false}
    />
  </div>
  <CohortGraduates />
</Layout>

---
import Layout from "../../layouts/Layout.astro";
import Carousel from "../../components/common/Carousel";
import CohortStructure from "../../components/cohortPages/CohortStructure.astro";
import CohortDetails from "../../components/cohortPages/common/CohortDetails.astro";
import Syllabus from "../../components/cohortPages/Syllabus.astro";
import CohortHeader from "../../components/cohort/CohortHeader.astro";
import Application from "../../components/common/Application";
import About from "../../components/cohortPages/ln/About.astro";
import CohortGraduates from "../../components/cohortPages/CohortGraduates.astro";
import MeetYourTAs from "../../components/cohortPages/ln/MeetYourTAs.astro";
import Preperation from "../../components/cohortPages/ln/Preperation.astro";
import { getCohortStartDate } from "../../lib/cohorts";

const headerProps = {
  removeHeader: true,
};
const role = "ln_cohort";
const cohortName = "Mastering Lightning";
const isVisible = true;

const res = await fetch("https://api.bitshala.org/Cohorts/available");
const cohorts = await res.json();

const commencementDate = getCohortStartDate(cohorts, "mb");
---

<Layout
  title="Mastering Lightning"
  headerProps={headerProps}
  isVisible={isVisible}
>
  <CohortHeader img="/cohort/ln.webp" />

  <About />
  <CohortDetails
    format={[
      {
        name: "Commencement date",
        desc: commencementDate,
      },
      {
        name: "Duration",
        desc: "06 weeks",
      },
      {
        name: "Cohort level",
        desc: "Intermediate",
      },
      {
        name: "Mode",
        desc: "Online Discord Session",
      },
      {
        name: "Format",
        desc: "Self-study, weekly club sessions, group discussions, and QnA",
      },
    ]}
  />
  <CohortStructure />
  <Preperation />
  <Syllabus
    syllabus={[
      {
        week: "Week 0",
        name: "Orientation",
        chNo: "-",
      },
      {
        week: "Week 1",
        name: "Introduction, Getting Started",
        chNo: "1,2",
      },
      {
        week: "Week 2",
        name: "How LN works, Node client",
        chNo: "3,4",
      },
      {
        week: "Week 3",
        name: "Node Operations, Lightning Architecture",
        chNo: "5,6",
      },
      {
        week: "Week 4",
        name: "Payment channels, HTLCs",
        chNo: "7,8",
      },
      {
        week: "Week 5",
        name: "Channel operation, Onion Routing",
        chNo: "9,10",
      },
      {
        week: "Week 6",
        name: "Gossip Channel, Path finding",
        chNo: "11,12",
      },
      {
        week: "Week 7",
        name: "Wire Protocol, Encrypted Transport",
        chNo: "13,14",
      },
      {
        week: "Week 8",
        name: "Payment Requests, Security, Privacy",
        chNo: "15,16,17",
      },
      {
        week: "Week 9",
        name: "Conclusion",
        chNo: "-",
      },
    ]}
  />
  <MeetYourTAs />

  <div id="applicationForm">
    <Application
      client:only
      cohortName={cohortName}
      role={role}
      regOpen={false}
    />
  </div>
  <CohortGraduates />
</Layout>

---
import Layout from "../layouts/Layout.astro";
import Header from "../components/common/Header.astro";
import Carousel from "../components/common/Carousel";
import Footer from "../components/common/Footer.astro";
import VideoCard from "../components/talks/VideoCard.astro";
import {
  getPlaylistDetails,
  mockedVideoConfig,
} from "../scripts/googleApi";

const isProd = import.meta.env.PROD;
const videoConfig = isProd
  ? await getPlaylistDetails(
      "PLdHBT9oS8yMX3ozzhidF8-WODxcr8ZwAU",
      import.meta.env.GOOGLE_KEY,
    )
  : mockedVideoConfig.slice(-6);

const headerProps = {
  heading: "Bitcoin Talks",
  subheading:
    "Learning Bitcoin alone is hard. Weâ€™re here to make it easier through insightful conversations with experienced Bitcoin developers about their Bitcoin journey.",
  image: "/website-v2/header/Talks_Hero.png",
  headingColor: "text-white",
  subheadingColor: "text-white",
};
---

<Layout title="Bitcoin Talks" headerProps={headerProps}>
  <div
    class="mt-3 grid grid-cols-1 gap-10 md:grid-cols-2 lg:grid-cols-3"
  >
    {
      videoConfig.map((video) => (
        <VideoCard video={video} />
      ))
    }
  </div>
  <div class="p-4 lg:p-0">
    <Carousel client:visible />
  </div>
</Layout>
